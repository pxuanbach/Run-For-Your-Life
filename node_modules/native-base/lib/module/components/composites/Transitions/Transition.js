var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.Transition=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _this=this,_jsxFileName="/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Transitions/Transition.tsx";var transformStylesMap={translateY:true,translateX:true,scale:true,scaleX:true,scaleY:true,rotate:true};var defaultStyles={opacity:1,translateY:0,translateX:0,scale:1,scaleX:1,scaleY:1,rotate:'0deg'};var getAnimatedStyles=function getAnimatedStyles(animateValue){return function(initial,to){var styles={transform:[]};for(var _key in initial){if(_key==='transition'){continue;}if(_key in transformStylesMap){var _styles$transform;(_styles$transform=styles.transform)==null?void 0:_styles$transform.push((0,_defineProperty2.default)({},_key,animateValue.interpolate({inputRange:[0,1],outputRange:[initial[_key],to[_key]]})));}else{styles[_key]=animateValue.interpolate({inputRange:[0,1],outputRange:[initial[_key],to[_key]]});}}return styles;};};var defaultTransitionConfig={type:'timing',useNativeDriver:true,duration:200};var defaultEntryTransition=(0,_extends2.default)({},defaultTransitionConfig,{duration:250});var defaultExitTransition=(0,_extends2.default)({},defaultTransitionConfig,{duration:200});var Transition=(0,_react.forwardRef)(function(_ref,ref){var children=_ref.children,onTransitionComplete=_ref.onTransitionComplete,_ref$visible=_ref.visible,visible=_ref$visible===void 0?false:_ref$visible,initial=_ref.initial,entry=_ref.entry,exit=_ref.exit,style=_ref.style;var animateValue=_react.default.useRef(new _reactNative.Animated.Value(0)).current;var _React$useState=_react.default.useState(visible?'entering':'exited'),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),animationState=_React$useState2[0],setAnimationState=_React$useState2[1];var prevVisible=_react.default.useRef(visible);_react.default.useEffect(function(){var _entry;var entryTransition=(0,_extends2.default)({},defaultEntryTransition,(_entry=entry)==null?void 0:_entry.transition);if(visible){var _entryTransition$type;_reactNative.Animated[(_entryTransition$type=entryTransition.type)!=null?_entryTransition$type:'timing'](animateValue,(0,_extends2.default)({toValue:1,useNativeDriver:true},entryTransition)).start(function(){onTransitionComplete&&onTransitionComplete('entered');setAnimationState('entered');});}},[visible,onTransitionComplete,animateValue,entry]);_react.default.useEffect(function(){if(prevVisible.current!==visible&&!visible){setAnimationState('exiting');}prevVisible.current=visible;},[visible]);_react.default.useEffect(function(){var exitTransition=(0,_extends2.default)({},defaultExitTransition,exit==null?void 0:exit.transition);if(animationState==='exiting'){var _exitTransition$type;_reactNative.Animated[(_exitTransition$type=exitTransition.type)!=null?_exitTransition$type:'timing'](animateValue,(0,_extends2.default)({toValue:0,useNativeDriver:true},exitTransition)).start(function(){onTransitionComplete&&onTransitionComplete('exited');setAnimationState('exited');});}},[exit,onTransitionComplete,setAnimationState,animationState,animateValue]);if(!visible&&animationState==='exited'){return null;}initial=animationState==='exiting'&&exit?(0,_extends2.default)({},defaultStyles,exit):(0,_extends2.default)({},defaultStyles,initial);entry=(0,_extends2.default)({},defaultStyles,entry);return _react.default.createElement(_reactNative.Animated.View,{pointerEvents:"box-none",needsOffscreenAlphaCompositing:true,style:[getAnimatedStyles(animateValue)(initial,entry),style],ref:ref,__self:_this,__source:{fileName:_jsxFileName,lineNumber:171,columnNumber:7}},children);});exports.Transition=Transition;
//# sourceMappingURL=Transition.js.map