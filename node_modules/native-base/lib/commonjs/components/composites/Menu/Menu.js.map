{"version":3,"sources":["Menu.tsx"],"names":["Menu","ref","trigger","closeOnSelect","children","onOpen","onClose","isOpenProp","isOpen","defaultIsOpen","placement","restProps","triggerRef","React","useRef","value","defaultValue","onChange","setIsOpen","newProps","handleOpen","useCallback","handleClose","triggerProps","updatedTrigger","onPress","open","enabled","callback","opacity","transition","duration","StyleSheet","absoluteFill","MenuContent","menuRef","menuProps","typeaheadProps"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport type { IMenuProps } from './types';\nimport Box from '../../primitives/Box';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport { Popper } from '../Popper';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { useControllableState, useKeyboardDismissable } from '../../../hooks';\nimport { useMenuTrigger, useMenu, useMenuTypeahead } from './useMenu';\nimport Backdrop from '../Backdrop';\nimport { OverlayContainer } from '@react-native-aria/overlays';\nimport { Transition } from '../Transitions';\nimport { FocusScope } from '@react-native-aria/focus';\nimport { MenuContext } from './MenuContext';\n\nconst Menu = (\n  {\n    trigger,\n    closeOnSelect = true,\n    children,\n    onOpen,\n    onClose,\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    placement = 'bottom left',\n    ...restProps\n  }: IMenuProps,\n  ref?: any\n) => {\n  const triggerRef = React.useRef(null);\n  const [isOpen, setIsOpen] = useControllableState({\n    value: isOpenProp,\n    defaultValue: defaultIsOpen,\n    onChange: (value) => {\n      value ? onOpen && onOpen() : onClose && onClose();\n    },\n  });\n\n  const newProps = usePropsResolution('Menu', restProps);\n  const handleOpen = React.useCallback(() => {\n    setIsOpen(true);\n  }, [setIsOpen]);\n\n  const handleClose = React.useCallback(() => {\n    setIsOpen(false);\n  }, [setIsOpen]);\n\n  const triggerProps = useMenuTrigger({\n    handleOpen,\n    isOpen,\n  });\n\n  let updatedTrigger = () => {\n    return trigger(\n      {\n        ...triggerProps,\n        ref: triggerRef,\n        onPress: handleOpen,\n      },\n      { open: isOpen }\n    );\n  };\n\n  useKeyboardDismissable({\n    enabled: isOpen,\n    callback: handleClose,\n  });\n\n  return (\n    <>\n      {updatedTrigger()}\n      <OverlayContainer>\n        <Transition\n          initial={{ opacity: 0 }}\n          entry={{ opacity: 1, transition: { duration: 150 } }}\n          exit={{ opacity: 0, transition: { duration: 150 } }}\n          visible={isOpen}\n          style={StyleSheet.absoluteFill}\n        >\n          <Popper\n            triggerRef={triggerRef}\n            onClose={handleClose}\n            placement={placement}\n            {...restProps}\n          >\n            <Backdrop bg=\"transparent\" onPress={handleClose} />\n            <Popper.Content>\n              <MenuContext.Provider\n                value={{ closeOnSelect, onClose: handleClose }}\n              >\n                <FocusScope contain restoreFocus autoFocus>\n                  <MenuContent menuRef={ref} {...newProps}>\n                    {children}\n                  </MenuContent>\n                </FocusScope>\n              </MenuContext.Provider>\n            </Popper.Content>\n          </Popper>\n        </Transition>\n      </OverlayContainer>\n    </>\n  );\n};\n\nconst MenuContent = ({\n  menuRef,\n  ...restProps\n}: Omit<IMenuProps, 'trigger'> & { menuRef: any }) => {\n  const menuProps = useMenu();\n  const typeaheadProps = useMenuTypeahead(menuProps);\n\n  return (\n    <Box {...restProps} {...menuProps} {...typeaheadProps} ref={menuRef}>\n      <ScrollView>{restProps.children}</ScrollView>\n    </Box>\n  );\n};\n\nexport default memo(forwardRef(Menu));\n"]}